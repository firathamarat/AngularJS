<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>23.Lesson_ng-options_ng-change</title>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.10/angular.min.js"></script>

    <script>

        var ControllerExample = angular.module("myapp", []),

            userURL = "https://jsonplaceholder.typicode.com/users",
            postURL = "https://jsonplaceholder.typicode.com/posts?userId=";


        ControllerExample.controller("mycontrol", function ($scope, $http) {

            //illerin ve plaka numaralarını içeren iller adında dizi tanımlandı
            $scope.iller = [{ plaka: '01', il: 'ADANA' }, { plaka: '02', il: 'ADIYAMAN' }, { plaka: '03', il: 'AFYON' }, { plaka: '04', il: 'AĞRI' }, { plaka: '05', il: 'AMASYA' }, { plaka: '06', il: 'ANKARA' }, { plaka: '07', il: 'ANTALYA' }
                , { plaka: '08', il: 'ARTVİN' }, { plaka: '09', il: 'AYDIN' }, { plaka: '10', il: 'BALIKESİR' }, { plaka: '11', il: 'BİLECİK' }, { plaka: '12', il: 'BİNGÖL' }, { plaka: '13', il: 'BİTLİS' }
                , { plaka: "14", il: 'BOLU' }, { plaka: "15", il: 'BURDUR' }, { plaka: "16", il: 'BURSA' }, { plaka: "17", il: 'ÇANAKKALE' }, { plaka: "18", il: 'ÇANKIRI' }, { plaka: "19", il: 'ÇORUM' }, { plaka: "20", il: 'DENİZLİ' }
                , { plaka: "21", il: 'DİYABAKIR' }, { plaka: "22", il: 'EDİRNE' }, { plaka: "23", il: 'ELAZIĞI' }, { plaka: "24", il: 'ERZİNCAN' }, { plaka: "25", il: 'ERZURUM' }, { plaka: "26", il: 'ESKİŞEHİR' }
                , { plaka: "27", il: 'GAZİANTEP' }, { plaka: "28", il: 'GİRESUN' }, { plaka: "29", il: 'GÜMÜŞHANE' }, { plaka: "30", il: 'HAKKARİ' }, { plaka: "31", il: 'HATAY' }, { plaka: "32", il: 'ISPARTA' }
                , { plaka: "33", il: 'İÇEL' }, { plaka: "34", il: 'İSTANBUL' }, { plaka: "35", il: 'İZMİR' }, { plaka: "36", il: 'KARS' }, { plaka: "37", il: 'KASTAMONU' }, { plaka: "38", il: 'KAYSERİ' }
                , { plaka: "39", il: 'KIRKLARELİ' }, { plaka: "40", il: 'KIRŞEHİR' }, { plaka: "41", il: 'KOCAELİ' }, { plaka: "42", il: 'KONYA' }, { plaka: "43", il: 'KÜTAHYA' }, { plaka: "44", il: 'MALATYA' }
                , { plaka: "45", il: 'MANİSA' }, { plaka: "46", il: 'KAHRAMANMARAŞ' }, { plaka: "47", il: 'MARDİN' }, { plaka: "48", il: 'MUĞLA' }, { plaka: "49", il: 'MUŞ' }, { plaka: "50", il: 'NEVŞEHİR' }
                , { plaka: "51", il: 'NİĞDE' }, { plaka: "52", il: 'ORDU' }, { plaka: "53", il: 'RİZE' }, { plaka: "54", il: 'SAKARYA' }, { plaka: "55", il: 'SAMSUN' }, { plaka: "56", il: 'SİİR' }
                , { plaka: "57", il: 'SİNOP' }, { plaka: "58", il: 'SİVAS' }, { plaka: "59", il: 'TEKİRDAĞ' }, { plaka: "60", il: 'TOKAT' }, { plaka: "61", il: 'TRABZON' }, { plaka: "62", il: 'TUNCELİ' }
                , { plaka: "63", il: 'ŞANLIURFA' }, { plaka: "64", il: 'UŞAK' }, { plaka: "65", il: 'VAN' }, { plaka: "66", il: 'YOZGAT' }, { plaka: "67", il: 'ZONGULDAK' }, { plaka: "68", il: 'AKSARAY' }
                , { plaka: "69", il: 'BAYBURT' }, { plaka: "70", il: 'KARAMAN' }, { plaka: "71", il: 'KIRKLARELİ' }, { plaka: "72", il: 'BATMAN' }, { plaka: "73", il: 'ŞIRNAK' }, { plaka: "74", il: 'BARTIN' }
                , { plaka: "75", il: 'ARDAHAN' }, { plaka: "76", il: 'IĞIDIR' }, { plaka: "77", il: 'YALOVA' }, { plaka: "78", il: 'KARABÜK' }, { plaka: "79", il: 'KİLİS' }, { plaka: "80", il: 'OSMANİYE' }, { plaka: "81", il: 'DÜZCE' }];

            //Select nesnesi değiştiğinde ekranda alert olarak göstermek için changeFunction fonksiyonu declare edildi e parametreyle bilgi alındı
            $scope.changeFunction = function (illerBilgi) {
                alert("Seçmiş olduğunuz ilin plakası : " + illerBilgi);
            }


            //----------------------------------------------------------------------------------------------

            $http.get(userURL).then(function (resp) {
                $scope.userList = resp.data;
                //Data yazılmaz ise 200 function(d){b||(b=yd(a)); vb bilgilerle birlikte gelir sadece veriler gelsin isteniyorsa data yazılmalıdır.
            });


            $scope.getPost = function (userID) {

                $http.get(postURL + userID).then(function (resp) {
                    $scope.postList = resp.data;

                });

            }

        });

    </script>



</head>

<!--

        ♦ ng-options = "" : Özniteliği dinamik bir <option> listesi oluşturmak için kullanılmaktadır.
        
          SYNTAX:
          <select ng-options="array expression"></select>


        ♦ ng-change = "" : Kullanıcı girişi değiştirdiğinde verilen ifadeyi değerlendirimesine olanak sağlar.

          SYNTAX:
          <element ng-change="expression"></element>
          
    -->

<body ng-app="myapp" ng-controller="mycontrol">

    <br>
                                                                                 <!-- text as value for item in items -->

    <select ng-model="illerBilgi" ng-change="changeFunction(illerBilgi)" ng-options="il.plaka as il.il for il in iller">
    </select>

    Seçmiş olduğunuz ilin plakası : {{illerBilgi}}

    <br>
    <br>
    <hr>
    <br>

    <select ng-model="selectUser" ng-change="getPost(selectUser)" ng-options="user.id as user.name for user in userList"></select>
    {{selectUser}}


    <ul>
        <li ng-repeat="post in postList">
            <b>{{post.title}}</b>
            <br>
            <p>{{post.body}}</p>
        </li>
    </ul>


</body>

</html>